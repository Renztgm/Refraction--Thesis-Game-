[gd_scene load_steps=30 format=3 uid="uid://crieuya1rk71"]

[ext_resource type="PackedScene" uid="uid://b42g54u5kjqbp" path="res://scenes/Map/OutsideMap.tscn" id="1_m7g27"]
[ext_resource type="Script" uid="uid://vq5qvu2yvsnw" path="res://scenes/Scene3/scene_3.gd" id="1_otrxq"]
[ext_resource type="AudioStream" uid="uid://cbwlp4dc0xryj" path="res://assets/audio/mp3/chapter 1 looking for & following companion.mp3" id="3_otrxq"]
[ext_resource type="PackedScene" uid="uid://btnevx6tvo7sf" path="res://assets/Building/Building7.tscn" id="7_tf8eh"]
[ext_resource type="Script" uid="uid://xdktxpaee1d" path="res://scenes/Scene3/bookstore.gd" id="8_ljopq"]
[ext_resource type="Script" uid="uid://bdt2j4ph8b8no" path="res://script/BookstoreMarker.gd" id="9_ynfyr"]
[ext_resource type="PackedScene" uid="uid://c8jfqypwf5vw5" path="res://scenes/Player/Player3d.tscn" id="11_aq08c"]
[ext_resource type="AudioStream" uid="uid://d3eleqvy3v1op" path="res://assets/audio/ui/Click_sound.wav" id="13_foqjr"]
[ext_resource type="PackedScene" uid="uid://cg5f5at0x4msp" path="res://discarded/dubai_clouds.glb" id="13_qt3ua"]
[ext_resource type="AudioStream" uid="uid://cncjwn0awxrsm" path="res://assets/audio/ambient/Wind Sound SOUND EFFECT - No Copyright[Download Free].mp3" id="14_kv2g0"]
[ext_resource type="Script" uid="uid://cqyi4xmd21ksa" path="res://scenes/TestingScenes/gridsystem2.0.gd" id="15_fnou3"]
[ext_resource type="Script" uid="uid://dgpkxn01o1wmr" path="res://scenes/Scene3/MemoryShard.gd" id="15_m7g27"]
[ext_resource type="PackedScene" uid="uid://cc2bs557jdqgg" path="res://scenes/NPCs/Npc2_No_sound.tscn" id="15_u4lah"]
[ext_resource type="Texture2D" uid="uid://cl87ahsoj60p4" path="res://addons/pngs/shard_sprite.png" id="16_fnou3"]
[ext_resource type="PackedScene" uid="uid://crr85kvm8e1vw" path="res://scenes/Inventory/InventoryUI.tscn" id="17_tf8eh"]
[ext_resource type="PackedScene" uid="uid://bsc2rl8o0kypo" path="res://scenes/quest/questUI.tscn" id="18_ljopq"]
[ext_resource type="PackedScene" uid="uid://bqgyp1ip2dc01" path="res://scenes/UI/Minimap.tscn" id="19_7j4dl"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_ds713"]

[sub_resource type="BoxShape3D" id="BoxShape3D_qqu30"]
size = Vector3(250, 1, 250)

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_tf8eh"]
sky_top_color = Color(0.455, 0.7, 0.56525, 1)
sky_horizon_color = Color(0, 0.588235, 0.364706, 1)
sky_cover_modulate = Color(0.658824, 0.901961, 0.811765, 1)
ground_bottom_color = Color(0, 0.588235, 0.364706, 1)
ground_horizon_color = Color(0.454902, 0.701961, 0.564706, 1)

[sub_resource type="Sky" id="Sky_k1ty1"]
sky_material = SubResource("ProceduralSkyMaterial_tf8eh")

[sub_resource type="Environment" id="Environment_ljopq"]
background_mode = 2
background_color = Color(1, 1, 1, 1)
sky = SubResource("Sky_k1ty1")
ambient_light_source = 2
ambient_light_color = Color(0.674815, 0.674815, 0.674815, 1)
reflected_light_source = 2
ssao_enabled = true
ssil_enabled = true
sdfgi_enabled = true
glow_enabled = true
glow_bloom = 0.83
glow_hdr_threshold = 1.75
glow_hdr_luminance_cap = 46.29
volumetric_fog_enabled = true
volumetric_fog_density = 0.1571
volumetric_fog_emission_energy = 110.71
volumetric_fog_anisotropy = 0.9
volumetric_fog_temporal_reprojection_amount = 0.99
adjustment_enabled = true
adjustment_brightness = 0.79
adjustment_contrast = 1.07
adjustment_saturation = 1.46

[sub_resource type="NavigationMesh" id="NavigationMesh_ds713"]
vertices = PackedVector3Array(-124.5, 1, -124.5, -124.5, 1, 124.5, 124.5, 1, 124.5, 124.5, 1, -124.5)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1)]

[sub_resource type="BoxMesh" id="BoxMesh_qqu30"]
size = Vector3(250, 1, 250)

[sub_resource type="BoxShape3D" id="BoxShape3D_xcpug"]
size = Vector3(80.70187, 10.4154, 1.56982)

[sub_resource type="BoxShape3D" id="BoxShape3D_q0b6v"]
size = Vector3(2.9207795, 5.2274475, 3.214755)

[sub_resource type="BoxShape3D" id="BoxShape3D_fnou3"]

[sub_resource type="AtlasTexture" id="AtlasTexture_otrxq"]
atlas = ExtResource("16_fnou3")
region = Rect2(0, 0, 256, 256)

[sub_resource type="SpriteFrames" id="SpriteFrames_tf8eh"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_otrxq")
}],
"loop": true,
"name": &"default",
"speed": 4.0
}]

[node name="Scene3" type="Node3D"]
script = ExtResource("1_otrxq")

[node name="Environment" type="Node3D" parent="."]

[node name="StaticBody3D" type="StaticBody3D" parent="Environment"]
physics_material_override = SubResource("PhysicsMaterial_ds713")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/StaticBody3D"]
shape = SubResource("BoxShape3D_qqu30")

[node name="CSGBox3D" type="CSGBox3D" parent="Environment/StaticBody3D"]
size = Vector3(250, 1, 250)

[node name="Sky" parent="Environment" instance=ExtResource("13_qt3ua")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.841215, 5.63674, 2.09051)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Environment"]
transform = Transform3D(0.32051834, -0.86823887, -0.37872103, -0.82024914, -0.4543697, 0.34747612, -0.4737716, 0.1992731, -0.85780585, 0, 0, 0)
light_color = Color(0.64705884, 1, 0.47843137, 1)
shadow_enabled = true
shadow_bias = 2.944
shadow_normal_bias = 2.05
shadow_transmittance_bias = 1.33
shadow_blur = 1.12
directional_shadow_max_distance = 200.0

[node name="WorldEnvironment" type="WorldEnvironment" parent="Environment"]
environment = SubResource("Environment_ljopq")

[node name="AudioManager" type="Node" parent="." groups=["player"]]

[node name="BackgroundMusic" type="AudioStreamPlayer" parent="AudioManager"]
stream = ExtResource("3_otrxq")
autoplay = true
bus = &"Music"
playback_type = 1
parameters/looping = true

[node name="UISounds" type="AudioStreamPlayer" parent="AudioManager"]
stream = ExtResource("13_foqjr")
bus = &"Music"

[node name="WaterPlayer" type="AudioStreamPlayer" parent="AudioManager"]
bus = &"Music"

[node name="WindPlayer" type="AudioStreamPlayer" parent="AudioManager"]
stream = ExtResource("14_kv2g0")
volume_db = -20.0
autoplay = true
bus = &"Music"
playback_type = 1
parameters/looping = true

[node name="Spawnpoint" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.7604, 0, 72.0895)

[node name="UI" type="CanvasLayer" parent="."]

[node name="InventoryUI" parent="UI" instance=ExtResource("17_tf8eh")]

[node name="QuestUi" parent="UI" instance=ExtResource("18_ljopq")]
visible = false

[node name="Player3d" parent="." groups=["player2"] instance=ExtResource("11_aq08c")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.59115887, 0.8313031, 67.50688)
collision_mask = 7

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="." groups=["grid"]]
navigation_mesh = SubResource("NavigationMesh_ds713")
script = ExtResource("15_fnou3")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D"]
visible = false
mesh = SubResource("BoxMesh_qqu30")

[node name="Npc3" parent="." groups=["npc"] instance=ExtResource("15_u4lah")]
transform = Transform3D(0.51, 0, 0, 0, 0.51, 0, 0, 0, 0.51, 0.5029535, 0.5881989, 63.12042)

[node name="Minimap" parent="." instance=ExtResource("19_7j4dl")]

[node name="Barrier" type="Node3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)

[node name="Barrier" type="StaticBody3D" parent="Barrier"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.53165, 0, -72.871)
collision_layer = 2
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Barrier/Barrier"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.662018, 1.22429, -0.654297)
shape = SubResource("BoxShape3D_xcpug")

[node name="Barrier2" type="StaticBody3D" parent="Barrier"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.21536, 0.760214, -47.1706)
collision_layer = 2
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Barrier/Barrier2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12.467533, 1.22429, -0.65121555)
shape = SubResource("BoxShape3D_xcpug")

[node name="Barrier3" type="StaticBody3D" parent="Barrier"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -4.65681, -1.15006, -47.1706)
collision_layer = 2
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Barrier/Barrier3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.35107, 3.90953, -0.5834)
shape = SubResource("BoxShape3D_xcpug")

[node name="Structures" parent="." instance=ExtResource("1_m7g27")]

[node name="Bookstore" type="Node3D" parent="Structures" groups=["interactable"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -82.431274, 0, 14.253796)

[node name="Area3D" type="Area3D" parent="Structures/Bookstore"]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 2.1664352, 0, -2.4048157)
collision_mask = 4
script = ExtResource("8_ljopq")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Structures/Bookstore/Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.7046204, 2.1137285, 0.5528383)
shape = SubResource("BoxShape3D_q0b6v")
debug_color = Color(0.9554098, 1.1551381e-06, 0.54590815, 0.41960785)

[node name="BookstoreMarker" type="Node3D" parent="Structures/Bookstore"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.9391785, 0, -12.704528)
script = ExtResource("9_ynfyr")

[node name="Building14" parent="Structures/Bookstore" instance=ExtResource("7_tf8eh")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, 0, 0)
visible = false

[node name="Shard" type="Node3D" parent="." groups=["quest_item"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -15.801199, 0, -37.70493)

[node name="Area3D" type="Area3D" parent="Shard"]
collision_layer = 2
collision_mask = 6
script = ExtResource("15_m7g27")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Shard/Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.164978, 0)
shape = SubResource("BoxShape3D_fnou3")

[node name="AnimatedSprite3D" type="AnimatedSprite3D" parent="Shard/Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.7147343, 0)
sprite_frames = SubResource("SpriteFrames_tf8eh")
autoplay = "default"
frame_progress = 0.8540429
